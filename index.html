<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8"><title>AI Karakter Dönüştürücü</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; }
        .container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: inline-block; }
        input, select, button { margin: 10px; display: block; width: 100%; box-sizing: border-box; padding: 10px; }
        #resultImage { margin-top: 20px; max-width: 512px; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Resmini Karakter Yap</h2>
        <input type="file" id="imageInput" accept="image/*">
        <select id="styleSelect">
            <option value="cyberpunk">Cyberpunk</option>
            <option value="anime">Anime</option>
            <option value="pixar">3D Pixar</option>
        </select>
        <button onclick="generate()">Dönüştür</button>
        <div id="loading" style="display:none;">İşleniyor... (30-40 sn sürebilir)</div>
        <img id="resultImage">
    </div>

    <script>
        async function generate() {
            const file = document.getElementById('imageInput').files[0];
            const style = document.getElementById('styleSelect').value;
            if(!file) return alert("Resim seç!");

            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async () => {
                const base64Image = reader.result.split(',')[1];
                document.getElementById('loading').style.display = 'block';

                const res = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ image: base64Image, style: style })
                });
                const data = await res.json();
                if(data.imageUrl) {
                    document.getElementById('resultImage').src = data.imageUrl;
                    document.getElementById('resultImage').style.display = 'inline-block';
                }
                document.getElementById('loading').style.display = 'none';
            };
        }
    </script>
</body>
</html>
